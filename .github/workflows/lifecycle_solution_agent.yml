name: lifecycle-solution-agent

on:
  workflow_dispatch:
    inputs:
      project_name:
        description: Project name
        required: true
        default: Lifecycle Automation Demo
      idea:
        description: Project idea
        required: true
        default: Build a fullstack platform with API, UI, tests, and deployment automation.
      project_type:
        description: Project type (frontend|backend|fullstack|microservices)
        required: false
        default: fullstack
      preferred_stack:
        description: Stack tokens separated by comma/newline/|/;
        required: false
        default: python,react
      business_requirements:
        description: Business requirements separated by comma/newline/|/;
        required: false
        default: Frontend portal,API access,Data storage
      technical_requirements:
        description: Technical requirements separated by comma/newline/|/;
        required: false
        default: CI pipeline,deployment rollback
      deployment_targets:
        description: Deployment targets separated by comma/newline/|/;
        required: false
        default: dev,staging,production
      ci_cd_platforms:
        description: CI/CD platforms separated by comma/newline/|/;
        required: false
        default: github_actions,azure_devops
      task_status:
        description: Current project task status. Solution agent processes only Ready For Solution.
        required: true
        default: Backlog

permissions:
  contents: read

jobs:
  run:
    uses: ./.github/workflows/lifecycle_agent_runner.yml
    with:
      stage: solution
      project_name: ${{ github.event.inputs.project_name }}
      idea: ${{ github.event.inputs.idea }}
      project_type: ${{ github.event.inputs.project_type }}
      preferred_stack: ${{ github.event.inputs.preferred_stack }}
      business_requirements: ${{ github.event.inputs.business_requirements }}
      technical_requirements: ${{ github.event.inputs.technical_requirements }}
      deployment_targets: ${{ github.event.inputs.deployment_targets }}
      ci_cd_platforms: ${{ github.event.inputs.ci_cd_platforms }}
      task_status: ${{ github.event.inputs.task_status }}
